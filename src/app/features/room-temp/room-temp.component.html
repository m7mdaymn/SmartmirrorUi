<div class="room-page">
  <!-- Back Button -->
  <button class="back-btn" routerLink="/">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </button>

  <!-- Page Header -->
  <div class="page-header">
    <div class="title-section">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      <div class="title-text">
        <h1>Room Environment</h1>
        <p class="subtitle">Smart monitoring of temperature, humidity & air quality</p>
      </div>
    </div>
    
    <div class="room-info">
      <div class="room-name">Living Room</div>
      <div class="room-status" [class]="getRoomStatus()">
        <div class="status-dot"></div>
        <span>{{ getRoomStatusText() }}</span>
      </div>
    </div>
  </div>

  <!-- Main Dashboard -->
  <div class="dashboard">
    <!-- Temperature Card -->
    <div class="sensor-card temperature">
      <div class="sensor-header">
        <div class="sensor-icon">ğŸŒ¡ï¸</div>
        <div class="sensor-title">
          <h3>Temperature</h3>
          <div class="sensor-unit">Â°C</div>
        </div>
      </div>
      
      <div class="sensor-value">
        <div class="current-value">{{ roomTemp }}</div>
        <div class="value-trend">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
            <polyline points="17 6 23 6 23 12"/>
          </svg>
          <span>{{ tempTrend }}Â° from yesterday</span>
        </div>
      </div>

      <div class="sensor-range">
        <div class="range-bar">
          <div class="range-fill" [style.width]="getTempPercentage() + '%'"></div>
          <div class="range-indicator" [style.left]="getTempPercentage() + '%'"></div>
        </div>
        <div class="range-labels">
          <span>16Â°C</span>
          <span class="comfort-range">18-24Â°C</span>
          <span>30Â°C</span>
        </div>
      </div>

      <div class="sensor-stats">
        <div class="stat">
          <div class="stat-label">Min Today</div>
          <div class="stat-value">{{ tempMin }}Â°C</div>
        </div>
        <div class="stat">
          <div class="stat-label">Max Today</div>
          <div class="stat-value">{{ tempMax }}Â°C</div>
        </div>
        <div class="stat">
          <div class="stat-label">Avg 24h</div>
          <div class="stat-value">{{ tempAvg }}Â°C</div>
        </div>
      </div>
    </div>

    <!-- Humidity Card -->
    <div class="sensor-card humidity">
      <div class="sensor-header">
        <div class="sensor-icon">ğŸ’§</div>
        <div class="sensor-title">
          <h3>Humidity</h3>
          <div class="sensor-unit">%</div>
        </div>
      </div>
      
      <div class="sensor-value">
        <div class="current-value">{{ humidity }}</div>
        <div class="value-trend">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="1 18 6 13 12 19 18 13 23 18"/>
          </svg>
          <span>{{ humidityTrend }}% from yesterday</span>
        </div>
      </div>

      <div class="sensor-range">
        <div class="range-bar">
          <div class="range-fill" [style.width]="humidity + '%'"></div>
          <div class="range-indicator" [style.left]="humidity + '%'"></div>
        </div>
        <div class="range-labels">
          <span>30%</span>
          <span class="comfort-range">40-60%</span>
          <span>80%</span>
        </div>
      </div>

      <div class="humidity-details">
        <div class="detail-item">
          <div class="detail-icon">ğŸ’¨</div>
          <div class="detail-content">
            <div class="detail-label">Dew Point</div>
            <div class="detail-value">{{ dewPoint }}Â°C</div>
          </div>
        </div>
        <div class="detail-item">
          <div class="detail-icon">ğŸŒ«ï¸</div>
          <div class="detail-content">
            <div class="detail-label">Feels Like</div>
            <div class="detail-value">{{ feelsLike }}Â°C</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Air Quality Card -->
    <div class="sensor-card air-quality">
      <div class="sensor-header">
        <div class="sensor-icon">ğŸ’¨</div>
        <div class="sensor-title">
          <h3>Air Quality</h3>
          <div class="sensor-unit">AQI</div>
        </div>
      </div>
      
      <div class="sensor-value">
        <div class="current-value">{{ aqi }}</div>
        <div class="aqi-level" [class]="getAqiClass()">{{ getAqiText() }}</div>
      </div>

      <div class="aqi-breakdown">
        <div class="aqi-parameter">
          <div class="parameter-name">COâ‚‚</div>
          <div class="parameter-value">{{ co2 }} ppm</div>
          <div class="parameter-bar">
            <div class="bar-fill" [style.width]="getCo2Percentage() + '%'"></div>
          </div>
        </div>
        <div class="aqi-parameter">
          <div class="parameter-name">VOC</div>
          <div class="parameter-value">{{ voc }} ppb</div>
          <div class="parameter-bar">
            <div class="bar-fill" [style.width]="getVocPercentage() + '%'"></div>
          </div>
        </div>
        <div class="aqi-parameter">
          <div class="parameter-name">PM2.5</div>
          <div class="parameter-value">{{ pm25 }} Âµg/mÂ³</div>
          <div class="parameter-bar">
            <div class="bar-fill" [style.width]="getPm25Percentage() + '%'"></div>
          </div>
        </div>
      </div>

      <div class="air-advice">
        <div class="advice-icon">{{ getAdviceIcon() }}</div>
        <div class="advice-text">{{ getAirAdvice() }}</div>
      </div>
    </div>
  </div>

  <!-- Comfort Index -->
  <div class="comfort-section">
    <h2>ğŸ˜Œ Comfort Index</h2>
    <div class="comfort-grid">
      <div class="comfort-meter">
        <div class="meter-circle" [style.background]="getComfortGradient()">
          <div class="meter-value">{{ comfortIndex }}</div>
          <div class="meter-label">/100</div>
        </div>
        <div class="comfort-level">{{ getComfortLevel() }}</div>
      </div>

      <div class="comfort-factors">
        <div class="factor" *ngFor="let factor of comfortFactors">
          <div class="factor-name">{{ factor.name }}</div>
          <div class="factor-bar">
            <div class="bar-fill" [style.width]="factor.value + '%'" 
                 [class]="getFactorClass(factor.value)"></div>
          </div>
          <div class="factor-value">{{ factor.value }}%</div>
        </div>
      </div>

      <div class="comfort-tips">
        <h3>ğŸ’¡ Tips for Better Comfort</h3>
        <ul>
          <li *ngFor="let tip of comfortTips">{{ tip }}</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- History Chart -->
  <div class="history-section">
    <div class="section-header">
      <h2>ğŸ“ˆ 24-Hour History</h2>
      <div class="chart-legend">
        <div class="legend-item">
          <div class="legend-color temp"></div>
          <span>Temperature</span>
        </div>
        <div class="legend-item">
          <div class="legend-color humidity"></div>
          <span>Humidity</span>
        </div>
      </div>
    </div>

    <div class="history-chart">
      <div class="chart-grid">
        <div class="grid-line" *ngFor="let line of [0,1,2,3,4]"
             [style.bottom]="line * 25 + '%'"></div>
      </div>
      
      <div class="chart-data">
        <!-- Temperature Line -->
        <svg class="temp-line">
          <polyline [attr.points]="getTempLinePoints()" fill="none" stroke="#64c8ff" stroke-width="3"/>
        </svg>
        
        <!-- Humidity Line -->
        <svg class="humidity-line">
          <polyline [attr.points]="getHumidityLinePoints()" fill="none" stroke="#2ecc71" stroke-width="3" stroke-dasharray="5,5"/>
        </svg>
        
        <!-- Data Points -->
        <div class="data-point" *ngFor="let hour of hourlyData; let i = index"
             [style.left]="(i / 23) * 100 + '%'"
             [style.bottom]="(hour.temp - 15) / 15 * 100 + '%'">
          <div class="point-value">{{ hour.temp }}Â°</div>
        </div>
      </div>
      
      <div class="chart-axis">
        <div class="axis-label" *ngFor="let label of timeLabels"
             [style.left]="label.position + '%'">{{ label.time }}</div>
      </div>
    </div>
  </div>
</div>