<div class="heart-page">
  <!-- Back Button -->
  <button class="back-btn" routerLink="/">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </button>

  <!-- Header -->
  <div class="page-header">
    <div class="title-section">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
      <div class="title-text">
        <h1>Heart Rate Monitor</h1>
        <p class="subtitle">Real-time pulse & blood oxygen from MAX30105</p>
      </div>
    </div>

    <div class="status-badge" [class]="statusClass">
      <div class="status-dot"></div>
      <span>{{ statusText }}</span>
    </div>
  </div>

  <!-- Waiting State -->
  <div class="waiting-state" *ngIf="!fingerDetected">
    <div class="pulse-heart" [class.active]="pulseAnimation">
      <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="#ff6b6b" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
      </svg>
    </div>
    <h2>Place your finger on the sensor</h2>
    <p>Hold steady for 9 seconds</p>
  </div>

  <!-- Main Content (Only when reading available) -->
  <div class="content-grid" *ngIf="fingerDetected && latestReading">
    <!-- Primary Metrics -->
    <div class="primary-metrics">
      <div class="metric-card pulse" [class.active]="pulseAnimation">
        <div class="metric-label">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
          </svg>
          <span>Heart Rate</span>
        </div>
        <div class="metric-value">
          <span class="big-number">{{ heartRate }}</span>
          <span class="unit">BPM</span>
        </div>
        <div class="metric-trend">
          <span>{{ statusText }} Range</span>
        </div>
      </div>

      <div class="metric-row">
        <div class="small-metric">
          <div class="metric-label">Blood Pressure</div>
          <div class="metric-value">{{ systolic }}/{{ diastolic }}<span class="unit">mmHg</span></div>
        </div>
        <div class="small-metric oxygen">
          <div class="metric-label">Blood Oxygen</div>
          <div class="metric-value">{{ oxygenLevel }}<span class="unit">%</span></div>
        </div>
      </div>
    </div>

    <!-- Simple Live Graph -->
    <div class="history-card">
      <div class="card-header">
        <h3>Live Pulse</h3>
        <div class="time-range">Real-time</div>
      </div>
      <div class="graph-container">
        <div class="live-wave" [class.active]="pulseAnimation"></div>
      </div>
    </div>
  </div>

  <!-- Bottom Stats -->
  <div class="stats-grid" *ngIf="fingerDetected">
    <div class="stat-card">
      <div class="stat-icon">‚ù§Ô∏è</div>
      <div class="stat-content">
        <div class="stat-label">Current BPM</div>
        <div class="stat-value">{{ heartRate }}</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ü©∏</div>
      <div class="stat-content">
        <div class="stat-label">SpO‚ÇÇ</div>
        <div class="stat-value">{{ oxygenLevel }}%</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">üìä</div>
      <div class="stat-content">
        <div class="stat-label">Status</div>
        <div class="stat-value">{{ statusText }}</div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="last-updated" *ngIf="fingerDetected">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <polyline points="12 6 12 12 16 14"/>
      </svg>
      <span>Last reading: {{ lastUpdated }}</span>
    </div>
    <div class="instruction" *ngIf="!fingerDetected">
      Hold finger steady ‚Ä¢ Do not move ‚Ä¢ Wait 9 seconds
    </div>
  </div>
</div>
