<div class="temp-page">
  <!-- Back Button -->
  <button class="back-btn" routerLink="/">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </button>

  <!-- Emergency Fever Alert -->
  <div class="emergency-alert" *ngIf="isFever">
    <div class="alert-content">
      <div class="alert-icon">ğŸš¨</div>
      <div class="alert-text">
        <h3>FEVER DETECTED!</h3>
        <p>Temperature: {{ bodyTemp }}Â°{{ unit }} â€” Rest and monitor health.</p>
      </div>
    </div>
  </div>

  <!-- Header -->
  <div class="page-header">
    <div class="title-section">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"/>
      </svg>
      <div class="title-text">
        <h1>Body Temperature</h1>
        <p class="subtitle">Non-contact forehead reading via MLX90614</p>
      </div>
    </div>

    <div class="system-status" [class]="connectionStatus">
      <div class="status-dot"></div>
      <span>{{ connectionStatusText }}</span>
      <small *ngIf="lastUpdated">Last: {{ lastUpdated }}</small>
    </div>
  </div>

  <!-- Loading / Error -->
  <div class="loading-overlay" *ngIf="loading">
    <p>Aiming sensor at forehead...</p>
    <p>Hold 3-5 cm away for accurate reading</p>
  </div>

  <div class="error-message" *ngIf="error">
    <p>âš ï¸ {{ error }}</p>
    <p>Tap "Body Temp" on home screen to enable MLX90614 sensor.</p>
  </div>

  <!-- Main Display -->
  <div class="temp-display-container" *ngIf="latestReading && !loading && !error">
    <!-- Thermometer -->
    <div class="thermometer">
      <div class="thermometer-body">
        <div class="thermometer-bulb">
          <div class="mercury" [style.height.%]="mercuryHeight"></div>
        </div>
        <div class="thermometer-scale">
          <div class="scale-mark" *ngFor="let mark of [35, 36, 37, 38, 39]"
               [style.bottom.%]="((mark - 35)/4)*100">
            <span class="scale-value">{{ mark }}Â°</span>
            <div class="scale-line"></div>
          </div>
          <div class="danger-zone" *ngIf="isFever"></div>
        </div>
      </div>

      <div class="current-temp">
        <div class="temp-value">{{ bodyTemp }}</div>
        <div class="temp-unit">Â°{{ unit }}</div>
        <div class="temp-status" [class]="tempStatusClass">
          {{ tempIcon }} {{ tempStatus }}
        </div>
      </div>
    </div>

    <!-- Info Panel -->
    <div class="temp-info">
      <div class="info-card main">
        <div class="info-content">
          <h3>Current Body Temperature</h3>
          <div class="info-value large">{{ bodyTemp }}Â°{{ unit }}</div>
          <div class="info-status" [class]="tempStatusClass">
            {{ tempStatus }}
          </div>
        </div>
      </div>

      <div class="info-grid">
        <div class="info-item">
          <div class="item-label">Ambient Temp</div>
          <div class="item-value">{{ ambientTemp }}Â°{{ unit }}</div>
        </div>
        <div class="info-item">
          <div class="item-label">Last Reading</div>
          <div class="item-value">{{ lastUpdated }}</div>
        </div>
        <div class="info-item">
          <div class="item-label">Status</div>
          <div class="item-value">{{ tempStatus }}</div>
        </div>
        <div class="info-item">
          <div class="item-label">Sensor</div>
          <div class="item-value">MLX90614</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Health Advice -->
  <div class="insights-section" *ngIf="latestReading">
    <h2>Health Guidance</h2>
    <div class="advice-card" [class.fever]="isFever" [class.elevated]="isElevated">
      <div class="advice-icon">{{ tempIcon }}</div>
      <div class="advice-text">
        <p *ngIf="tempStatus === 'NORMAL'">
          <strong>Healthy temperature!</strong> Your body is in normal range.
        </p>
        <p *ngIf="tempStatus === 'ELEVATED'">
          <strong>Slightly elevated.</strong> Rest, hydrate, and monitor over next hours.
        </p>
        <p *ngIf="tempStatus === 'FEVER'">
          <strong>Fever detected.</strong> Rest, stay hydrated. Consider medical advice if >38.5Â°C or symptoms persist.
        </p>
        <p *ngIf="tempStatus === 'LOW'">
          Temperature is low. Ensure you're warm and check again.
        </p>
        <small>Tips: Measure from forehead, 3â€“5 cm distance, in stable room temperature.</small>
      </div>
    </div>
  </div>
</div>
