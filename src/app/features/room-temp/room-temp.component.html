<div class="room-page">
  <!-- Back Button -->
  <button class="back-btn" routerLink="/">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M19 12H5M12 19l-7-7 7-7"/>
    </svg>
  </button>

  <!-- Header -->
  <div class="page-header">
    <div class="title-section">
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      <div class="title-text">
        <h1>Room Environment</h1>
        <p class="subtitle">Live data from DHT22 sensor</p>
      </div>
    </div>

    <div class="room-info">
      <div class="room-name">Living Room</div>
      <div class="room-status" [class]="connectionStatus">
        <div class="status-dot"></div>
        <span>{{ connectionStatusText }}</span>
        <small *ngIf="lastUpdated">Updated: {{ lastUpdated }}</small>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-overlay" *ngIf="loading">
    <p>Waiting for sensor data...</p>
  </div>

  <!-- Error State -->
  <div class="error-message" *ngIf="error">
    <p>âš ï¸ {{ error }}</p>
    <p>Make sure the DHT22 sensor is enabled from the home screen.</p>
  </div>

  <!-- Main Data (Only show when we have real data) -->
  <div class="dashboard" *ngIf="latestReading && !loading && !error">
    <!-- Temperature Card -->
    <div class="sensor-card temperature">
      <div class="sensor-header">
        <div class="sensor-icon">ğŸŒ¡ï¸</div>
        <h3>Temperature</h3>
      </div>
      <div class="sensor-value">
        <div class="current-value">{{ temperature }}<span class="unit">Â°{{ unit }}</span></div>
      </div>
      <div class="sensor-range">
        <div class="range-bar">
          <div class="range-fill" [style.width.%]="tempPercentage"></div>
          <div class="range-indicator" [style.left.%]="tempPercentage"></div>
        </div>
        <div class="range-labels">
          <span>16Â°</span>
          <span class="comfort-range">18â€“26Â°C</span>
          <span>30Â°</span>
        </div>
      </div>
    </div>

    <!-- Humidity Card -->
    <div class="sensor-card humidity">
      <div class="sensor-header">
        <div class="sensor-icon">ğŸ’§</div>
        <h3>Humidity</h3>
      </div>
      <div class="sensor-value">
        <div class="current-value">{{ humidity }}<span class="unit">%</span></div>
      </div>
      <div class="sensor-range">
        <div class="range-bar">
          <div class="range-fill" [style.width.%]="humidityPercentage"></div>
          <div class="range-indicator" [style.left.%]="humidityPercentage"></div>
        </div>
        <div class="range-labels">
          <span>30%</span>
          <span class="comfort-range">40â€“60%</span>
          <span>80%</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Comfort Summary -->
  <div class="comfort-section" *ngIf="latestReading">
    <h2>Comfort Level</h2>
    <div class="comfort-meter">
      <div class="meter-circle" [style.background]="comfortColor">
        <div class="meter-value">{{ comfortLevel }}</div>
      </div>
    </div>
    <p class="comfort-text" [style.color]="comfortColor">
      {{ comfortLevel === 'Very Comfortable' ? 'ğŸ˜Š' : comfortLevel === 'Comfortable' ? 'ğŸ™‚' : 'ğŸ˜•' }}
      {{ comfortLevel }}
    </p>
  </div>
</div>
